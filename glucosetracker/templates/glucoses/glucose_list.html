{% extends 'base.html' %}

{% block heading %}<h3>
    <span class="glyphicon glyphicon-list"></span> Glucose Data</h3>{% endblock %}

{% block content %}
<div class="well btn-toolbar" role="toolbar">
    <div class="btn-group">
        <a href="{% url 'glucose_create'%}">
        <button type="button" class="btn btn-primary">
            <span class="glyphicon glyphicon-plus"></span> New Glucose</button>
        </a>
    </div>
    <div class="btn-group">
        <a href="{% url 'glucose_list' %}">
        <button type="button" class="btn btn-success">
            <span class="glyphicon glyphicon-filter"></span> Filter Data</button>
        </a>
    </div>
    <div class="btn-group">
        <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">
        <span class="glyphicon glyphicon-stats"></span> Reports
        <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
        <li><a href="#">Charts</a></li>
        <li class="divider"></li>
        <li><a href="{% url 'glucose_email_report' %}">E-mail Report</a></li>
        </ul>
    </div>
</div>

<div class="well">
    {% if glucose_list %}
    <table id="glucose_table">
        <thead>
            <tr>
                <th><center>Value</center></th>
                <th>Category</th>
                <th>Date</th>
                <th>Time</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            {% for glucose in glucose_list %}
            <tr>
                <td><center><b><a href="{% url 'glucose_update' glucose.id %}">{{ glucose.value }}</a></b></center></td>
                <td>{{ glucose.category }}</td>
                <td>{{ glucose.record_date }}</td>
                <td>{{ glucose.record_time }}</td>
                <td>{{ glucose.notes }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p><em>No data to display. Please use the button above to add a new
        entry.</em></p>
    {% endif %}
    <br>
</div>
{% endblock %}

{% block extracss %}
<link href="{{ STATIC_URL }}datatables/media/css/jquery.dataTables.css" rel="stylesheet">
<link href="{{ STATIC_URL }}datatables/extras/TableTools/media/css/TableTools.css" rel="stylesheet">
{% endblock %}

{% block extrajs %}
<script src="{{ STATIC_URL }}datatables/media/js/jquery.dataTables.min.js"></script>
<script src="{{ STATIC_URL }}datatables/extras/TableTools/media/js/TableTools.min.js"></script>
<script type="text/javascript">
$(document).ready( function () {
	$('#glucose_table').dataTable( {
		"sDom": 'T<"clear">lrtip',
        "oTableTools": {
			"sSwfPath": "{{ STATIC_URL }}datatables/extras/TableTools/media/swf/copy_csv_xls_pdf.swf",
		    "aButtons": [ "csv", "pdf", "print" ]
		},
		"aaSorting": [ [2,'desc'], [3,'desc']]
	} );
} );
</script>
{% endblock %}